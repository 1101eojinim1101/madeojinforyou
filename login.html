<!DOCTYPE html>
<html lang="ko">
<head><meta charset="UTF-8"><title>로그인</title></head>
<body
  <h1>로그인</h1>
  <input id="username" placeholder="ID" /><br/>
  <input id="password" type="password" placeholder="Password" /><br/>
  <button id="btnLogin">로그인</button>
  <p id="msg" style="color:red;"></p>

  <script>
  document.getElementById('btnLogin').addEventListener('click', async () => {
    const user = document.getElementById('username').value;
    const pw   = document.getElementById('password').value;
    const msg  = document.getElementById('msg');

    // 자격증명 파일 읽어오기
    const res = await fetch('./static/credentials.json');
    if (!res.ok) {
      msg.innerText = '자격증명 파일을 불러올 수 없습니다.';
      return;
    }
    const creds = await res.json();

    // 로그인 검증
    if (creds[user] && creds[user] === pw) {
      // 성공 → localStorage에 저장한 뒤 대시보드로 이동
      localStorage.setItem('studentId', user);
      location.href = 'dashboard.html';
    } else {
      msg.innerText = 'ID 또는 비밀번호가 올바르지 않습니다.';
    }
  });
  </script>
</body>
</html>
